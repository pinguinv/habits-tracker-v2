<h2 mat-dialog-title class="text-center">
  {{ habitDialogData.type | titlecase }} Habit
</h2>
<mat-dialog-content class="!pb-1">
  <mat-stepper linear [formGroup]="habitForm" labelPosition="bottom" #stepper>
    <mat-step [stepControl]="habitForm.controls.color">
      <ng-template matStepLabel>Color</ng-template>
      <ng-template matStepContent>
        <h2 class="text-xl pt-4 text-center">Pick a color</h2>
        <div class="pt-4">
          <mat-radio-group
            aria-label="Color"
            class="flex flex-wrap justify-center gap-x-3"
            formControlName="color"
          >
            <mat-radio-button value="cyan">Cyan</mat-radio-button>
            <mat-radio-button value="violet">Violet</mat-radio-button>
            <mat-radio-button value="red">Red</mat-radio-button>
            <mat-radio-button value="orange">Orange</mat-radio-button>
          </mat-radio-group>
        </div>
        <div class="w-full flex justify-end pt-4">
          <button matButton matDialogClose>Cancel</button>
          <button matButton matStepperNext>Next</button>
        </div>
      </ng-template>
    </mat-step>
    <mat-step [stepControl]="habitForm.controls.title">
      <ng-template matStepLabel>Title & Description</ng-template>
      <ng-template matStepContent>
        <h2 class="text-xl pt-4 text-center">Define your habit</h2>
        <div class="grid grid-cols-1 gap-4 pt-4">
          <mat-form-field
            hideRequiredMarker
            floatLabel="always"
            appearance="outline"
          >
            <mat-label>Habit Title</mat-label>
            <input matInput formControlName="title" required title="" />
            @if (habitForm.controls.title.invalid) {
            <mat-error>Enter a name</mat-error>
            }
          </mat-form-field>

          <mat-form-field floatLabel="always" appearance="outline">
            <mat-label>Short description</mat-label>
            <textarea
              matInput
              formControlName="shortDescription"
              class="min-h-6"
            ></textarea>
          </mat-form-field>
        </div>
        <div class="w-full flex justify-end pt-4">
          <button matButton matStepperPrevious>Back</button>
          <button
            matButton
            matStepperNext
            [disabled]="habitForm.controls.title.invalid"
          >
            Next
          </button>
        </div>
      </ng-template>
    </mat-step>
    <mat-step [stepControl]="habitForm.controls.frequency">
      <ng-template matStepLabel>Frequency</ng-template>
      <ng-template matStepContent>
        <app-frequency-picker
          [frequencyInput]="habitDialogData.type === 'edit' ? habitDialogData.habitData.frequency : ''"
          (frequencyOutput)="setEncodedFrequency($event)"
        ></app-frequency-picker>
        <div class="w-full flex justify-end pt-4">
          <button matButton matStepperPrevious>Back</button>
          <button
            matButton
            [disabled]="habitForm.invalid || encodedFrequency() === ''"
            (click)="saveAndCloseDialog()"
          >
            Save
          </button>
        </div>
      </ng-template>
    </mat-step>
  </mat-stepper>
</mat-dialog-content>
